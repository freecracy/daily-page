import{_ as s,c as n,o as a,a as l}from"./app.eff5f3e9.js";const i=JSON.parse('{"title":"2022年03月15日","description":"","frontmatter":{},"headers":[{"level":2,"title":"头条","slug":"头条","link":"#头条","children":[]},{"level":2,"title":"code","slug":"code","link":"#code","children":[]},{"level":2,"title":"每日一题","slug":"每日一题","link":"#每日一题","children":[]}],"relativePath":"2022年03月15日.md","lastUpdated":1647357845000}'),p={name:"2022年03月15日.md"},o=l(`<h1 id="_2022年03月15日" tabindex="-1">2022年03月15日 <a class="header-anchor" href="#_2022年03月15日" aria-hidden="true">#</a></h1><h2 id="头条" tabindex="-1">头条 <a class="header-anchor" href="#头条" aria-hidden="true">#</a></h2><p><a href="https://toutiao.io/k/sh6t6h0" target="_blank" rel="noreferrer">实时数仓之 Kappa 架构与 Lambda 架构（建议收藏！）</a></p><p><a href="https://toutiao.io/k/0m9sdkf" target="_blank" rel="noreferrer">GitLab CI 打造一条自己的流水线</a></p><p><a href="https://toutiao.io/k/fvhw2yp" target="_blank" rel="noreferrer">微信全文搜索技术优化</a></p><p><a href="https://toutiao.io/k/qtrl966" target="_blank" rel="noreferrer">大厂中层“再就业”难；我的命令行开发环境；第一个五年，快速到P7获取年薪50w｜码农周刊VIP会员专属邮件周报 Vol.083</a></p><p><a href="https://toutiao.io/k/2yey7b2" target="_blank" rel="noreferrer">前端大佬都在使用的JavaScript工具函数宝典（内含95个工具函数）</a></p><p><a href="https://toutiao.io/k/4ucbsnc" target="_blank" rel="noreferrer">传阿里腾讯即将大裁员，最高裁撤 30%</a></p><p><a href="https://toutiao.io/k/qrjplwz" target="_blank" rel="noreferrer">分布式系统中的领导选举</a></p><p><a href="https://toutiao.io/k/2e6758m" target="_blank" rel="noreferrer">兑现 Service Mesh 的新价值：精确控制“爆炸半径”</a></p><p><a href="https://toutiao.io/k/6shc3p2" target="_blank" rel="noreferrer">《剑指Offer：专项突破版》 - 链表部分 JavaScript 题解</a></p><p><a href="https://toutiao.io/k/ad3p2fg" target="_blank" rel="noreferrer">人工智能的学习经验总结！</a></p><p><a href="https://toutiao.io/k/izj117w" target="_blank" rel="noreferrer">开源：如何优雅的实现一个操作日志组件</a></p><p><a href="https://toutiao.io/k/7bn5kqr" target="_blank" rel="noreferrer">有赞移动隐私制约探索与实践</a></p><p><a href="https://toutiao.io/k/a6f8gq1" target="_blank" rel="noreferrer">WebRTC系列分享 | WebRTC视频QoS全局技术栈</a></p><p><a href="https://toutiao.io/k/hejzm9o" target="_blank" rel="noreferrer">90 后都开始说自己老了…</a></p><p><a href="https://toutiao.io/k/an88hln" target="_blank" rel="noreferrer">字节的“派对岛”、腾讯的超级QQ秀…为何元宇宙落点都在社交？｜海外视角</a></p><p><a href="https://toutiao.io/k/p4u2lwf" target="_blank" rel="noreferrer">聊聊springboot项目全局异常处理那些事儿</a></p><p><a href="https://toutiao.io/k/8afuprx" target="_blank" rel="noreferrer">获取设备唯一编号替代IMEI新方案</a></p><p><a href="https://toutiao.io/k/548fuud" target="_blank" rel="noreferrer">Guava中这些Map的骚操作，让我的代码量减少了50%</a></p><p><a href="https://toutiao.io/k/ql0u274" target="_blank" rel="noreferrer">花式沉默Defender</a></p><p><a href="https://toutiao.io/k/hjda293" target="_blank" rel="noreferrer">[推荐] 我的命令行开发环境 ❤️</a></p><p><a href="https://toutiao.io/k/qjooigy" target="_blank" rel="noreferrer">[推荐] MySQL 团队开发规范</a></p><p><a href="https://toutiao.io/k/pshtt8d" target="_blank" rel="noreferrer">[推荐] 快看我在Redis分布式锁上，栽的8个跟头！</a></p><p><a href="https://toutiao.io/k/imslmgz" target="_blank" rel="noreferrer">[推荐] 高并发是一种架构思维模式</a></p><p><a href="https://toutiao.io/k/chtkqxo" target="_blank" rel="noreferrer">[推荐] Java泛型详解，史上最全图文详解！</a></p><p><a href="https://toutiao.io/k/f4vabj7" target="_blank" rel="noreferrer">[推荐] 微服务如何划分</a></p><h2 id="code" tabindex="-1">code <a class="header-anchor" href="#code" aria-hidden="true">#</a></h2><p><a href="https://leetcode-cn.com/problems/count-number-of-maximum-bitwise-or-subsets" target="_blank" rel="noreferrer">统计按位或能得到最大值的子集数目</a></p><h2 id="每日一题" tabindex="-1">每日一题 <a class="header-anchor" href="#每日一题" aria-hidden="true">#</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">                  一次两道题，因为相关的。</span></span>
<span class="line"><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、以下代码输出什么？</span></span>
<span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">&quot;</span><span style="color:#FFCB6B;">fmt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">    a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    fmt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Println</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">a</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">A：编译错误；B：</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">；C：</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;">；D：</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;">、以下代码输出什么？</span></span>
<span class="line"><span style="color:#89DDFF;">package</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">main</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">func</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">44</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">77</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">	</span><span style="color:#82AAFF;">println</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">x</span><span style="color:#89DDFF;">),</span><span style="color:#A6ACCD;"> x</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">A：</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span><span style="color:#A6ACCD;">；B：</span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;">；C：</span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;">；D：以上都不对</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                  </span></span>
<span class="line"><span style="color:#A6ACCD;">                    查看答案</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">                  答案解析：</span></span>
<span class="line"><span style="color:#A6ACCD;">                  第 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> 题是 Go 语言爱好者周刊第 </span><span style="color:#F78C6C;">87</span><span style="color:#A6ACCD;">的题目。</span></span>
<span class="line"><span style="color:#A6ACCD;">正确答案是：C，正确率 </span><span style="color:#F78C6C;">52</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">。这道题相对简单，但依然有近一半的人答错了。</span></span>
<span class="line"><span style="color:#A6ACCD;">而第 </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> 题是周刊第 </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;"> 期的题目，正确答案也是 C，只有 </span><span style="color:#F78C6C;">25</span><span style="color:#89DDFF;">%</span><span style="color:#A6ACCD;">。</span></span>
<span class="line"><span style="color:#A6ACCD;">这涉及到 array</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">slice 的一些相关知识。</span></span>
<span class="line"><span style="color:#F78C6C;">01</span><span style="color:#A6ACCD;"> 数组和切片</span></span>
<span class="line"><span style="color:#A6ACCD;">关于两者，Go 语言规范中都有明确定义。</span></span>
<span class="line"><span style="color:#A6ACCD;">数组是这么说明的：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">数组是单一类型元素的有序序列，该单一类型称为元素类型。元素的个数被称为数组长度，并且不能为负值。长度是数组类型的一部分；它必须为一个可以被 </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> 类型的值所代表的非负常量。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">这里一个关键点就是，长度是数组的一部分，因此 </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> 和 </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> 是不同类型。</span></span>
<span class="line"><span style="color:#A6ACCD;">再看看切片：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">切片是针对一个底层数组的连续段的描述符，它提供了对该数组内有序序列元素的访问。切片类型表示其元素类型的数组的所有切片的集合。元素的数量被称为切片长度，且不能为负。未初始化的切片的值为 </span><span style="color:#89DDFF;">nil</span><span style="color:#A6ACCD;"> 。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">从 EBNF 的表示可以看出区别：</span></span>
<span class="line"><span style="color:#A6ACCD;">ArrayType   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ArrayLength</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ElementType </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">SliceType </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ElementType </span><span style="color:#89DDFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">也就是说，长度不是切片类型的一部分，切片长度可变。</span></span>
<span class="line"><span style="color:#F78C6C;">02</span><span style="color:#A6ACCD;"> 常见字面量初始化</span></span>
<span class="line"><span style="color:#A6ACCD;">我不打算讲解数组</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">切片初始化的各种情况，主要介绍常见的字面量初始化，以及和上面题目相关的部分。</span></span>
<span class="line"><span style="color:#A6ACCD;">通常我们会这么初始化一个数组：</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> intSet </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">注意 [] 中的 </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;">，它表示数组的长度。因为初始化时，我们只给定了 </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> 个数，因此后 </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> 个元素是 </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">：</span></span>
<span class="line"><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">注意和这种写法的区别：</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> intSet </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[...]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">对于切片来说，一般这样初始化：</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> intSlice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">// 或基于 intSet 进行初始化</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> intSlice </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> intSet</span><span style="color:#89DDFF;">[:]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">当然，针对 Slice，更多时候是通过 make 创建，然后其他方式初始化，这里不展开了。</span></span>
<span class="line"><span style="color:#F78C6C;">03</span><span style="color:#A6ACCD;"> 特殊的初始化</span></span>
<span class="line"><span style="color:#A6ACCD;">在 Go语言规范「Composite literals」部分对数组和切片的字面值初始化进行了规定，因为数组和切片类似，我们这里只说切片的情况。</span></span>
<span class="line"><span style="color:#A6ACCD;">先看组合字面值的 EBNF 表示：</span></span>
<span class="line"><span style="color:#A6ACCD;">CompositeLit  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> LiteralType</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> LiteralValue </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">LiteralType   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> StructType </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> ArrayType </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">]</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ElementType </span><span style="color:#89DDFF;">|</span></span>
<span class="line"><span style="color:#A6ACCD;">                SliceType </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> MapType </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> TypeName </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">LiteralValue  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">{</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> ElementList</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">ElementList   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> KeyedElement</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> KeyedElement </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">KeyedElement  </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;"> Key</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> Element </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">Key           </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> FieldName </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> Expression </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> LiteralValue </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">FieldName     </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> identifier </span><span style="color:#89DDFF;">.</span></span>
<span class="line"><span style="color:#A6ACCD;">Element       </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> Expression </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> LiteralValue </span><span style="color:#89DDFF;">.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">从上到下看，简单解释一下：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">第 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> 行，表示组合字面值由 LiteralType 和 LiteralValue 构成，其中 LiteralType 表示组合字面值的类型，LiteralValue 表示值；</span></span>
<span class="line"><span style="color:#A6ACCD;">第 </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> 行，解释 LiteralType，它可以是 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 后面的类型。允许的类型有：结构体、数组、切片、</span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 等，其中还可以是类似 </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">…</span><span style="color:#89DDFF;">]</span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> 的形式；</span></span>
<span class="line"><span style="color:#A6ACCD;">第 </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> 行，解释 LiteralValue，它由一对 </span><span style="color:#89DDFF;">{}</span><span style="color:#A6ACCD;"> 包裹，其中包含可选的 ElementList；</span></span>
<span class="line"><span style="color:#A6ACCD;">第 </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> 行，解释 ElementList，它由若干 KeyedElement 组成；</span></span>
<span class="line"><span style="color:#A6ACCD;">第 </span><span style="color:#F78C6C;">6</span><span style="color:#A6ACCD;"> 行，解释 KeyedElement，这是该篇题目的重点之处。在 EBNF 中，[] 表示这部分是可选的，因此表示具体元素时，一般 Key 可以省略（</span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 不能省略），这就是通常数组和切片的初始化语法；</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">在这个之后，规范上给出了针对数组和切片字面值的应用规则：</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">数组中的每个元素有一个关联的标记其位置的整数索引。</span></span>
<span class="line"><span style="color:#A6ACCD;">带键的元素使用该键作为其索引。这个键必须是可被类型 </span><span style="color:#C792EA;">int</span><span style="color:#A6ACCD;"> 所表示的一个非负常量；而且如果其被赋予了类型的话则必须是整数类型。</span></span>
<span class="line"><span style="color:#A6ACCD;">不带键的元素使用之前元素的索引加一。如果第一个元素没有键，则其索引为零。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">根据以上 </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> 点，我们很容易知道，在 a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> 中，我们指定了第 </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> 个元素（注意索引是从 </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> 开始的）的值为 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">，根据数组</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">切片的特性，自然存在第 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">、</span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> 个元素，没有指定值时，Go 会为其设置默认值。因此这个写法和下面的写法等价：</span></span>
<span class="line"><span style="color:#A6ACCD;">a </span><span style="color:#89DDFF;">:=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">对于第 </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;"> 期的题目：</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">44</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">77</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">指定了第 </span><span style="color:#F78C6C;">5</span><span style="color:#A6ACCD;"> 个元素（对应索引是 </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;">），值是 </span><span style="color:#F78C6C;">44</span><span style="color:#A6ACCD;">。根据上面规则的第三点，</span><span style="color:#F78C6C;">55</span><span style="color:#A6ACCD;">、</span><span style="color:#F78C6C;">66</span><span style="color:#A6ACCD;"> 都没有指定索引，因此它们的索引是前一个元素的索引加一，即：</span></span>
<span class="line"><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">下一个元素是 </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">77</span><span style="color:#A6ACCD;">，为其指定了索引 </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;">，因此它的下一元素 </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;"> 的索引就是 </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> 了，因此这个定义相当于如下的定义：</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">44</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">5</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">6</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">77</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">同样，因为数组</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">切片的特性，缺少的元素（索引 </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> 和 </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;">）值是 </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">，而整个切片的长度是最大索引加一，即 </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;">。</span></span>
<span class="line"><span style="color:#F78C6C;">04</span><span style="color:#A6ACCD;"> 总结</span></span>
<span class="line"><span style="color:#A6ACCD;">别觉得这道题目恶心，实际中这么写代码可能也确实会被打（当然，第 </span><span style="color:#F78C6C;">87</span><span style="color:#A6ACCD;"> 题的写法还是很有可能的）。这里主要是希望大家多掌握一些规范、细节，我想不少人不清楚，原来数组（切片）也可以指定索引进行初始化。语言语法毕竟必须严谨，而这些都在 Go 语言规范里。</span></span>
<span class="line"><span style="color:#A6ACCD;">延伸思考：第 </span><span style="color:#F78C6C;">88</span><span style="color:#A6ACCD;"> 期的题目，如果改为这样结果又如何？</span></span>
<span class="line"><span style="color:#89DDFF;">var</span><span style="color:#A6ACCD;"> x </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[]</span><span style="color:#C792EA;">int</span><span style="color:#89DDFF;">{</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">44</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">55</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">66</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">77</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">88</span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">欢迎大胆的留言说出你的答案！</span></span>
<span class="line"><span style="color:#A6ACCD;">答案解析来自：https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//polarisxu.studygolang.com/posts/go/action/weekly-question-88/。</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br></div></div>`,31),e=[o];function r(t,c,C,D,y,F){return a(),n("div",null,e)}const b=s(p,[["render",r]]);export{i as __pageData,b as default};
