import{_ as a,c as s,o as e,a as n}from"./app.eff5f3e9.js";const A=JSON.parse('{"title":"2022年01月15日","description":"","frontmatter":{},"headers":[{"level":2,"title":"头条","slug":"头条","link":"#头条","children":[]},{"level":2,"title":"code","slug":"code","link":"#code","children":[]},{"level":2,"title":"每日一题","slug":"每日一题","link":"#每日一题","children":[]}],"relativePath":"2022年01月15日.md","lastUpdated":1642260026000}'),r={name:"2022年01月15日.md"},l=n(`<h1 id="_2022年01月15日" tabindex="-1">2022年01月15日 <a class="header-anchor" href="#_2022年01月15日" aria-hidden="true">#</a></h1><h2 id="头条" tabindex="-1">头条 <a class="header-anchor" href="#头条" aria-hidden="true">#</a></h2><p><a href="https://toutiao.io/k/14kxbpf" target="_blank" rel="noreferrer">撸猫必备三件套，立即下单现价仅需8.9元！</a></p><p><a href="https://toutiao.io/k/c8n540a" target="_blank" rel="noreferrer">优质网站同好者周刊（第 048 期） | 倾城博客</a></p><p><a href="https://toutiao.io/k/ux5oc88" target="_blank" rel="noreferrer">大数据资产管理平台实践（PPT）</a></p><p><a href="https://toutiao.io/k/qoh89wf" target="_blank" rel="noreferrer">3.6 万 Star！一个跨平台、快速的轻量级 Web 服务器</a></p><p><a href="https://toutiao.io/k/1dauixx" target="_blank" rel="noreferrer">据说看完这篇 JVM 要一小时</a></p><p><a href="https://toutiao.io/k/zo9wx2x" target="_blank" rel="noreferrer">Python Type Hints 从入门到实践</a></p><p><a href="https://toutiao.io/k/kec70pe" target="_blank" rel="noreferrer">手把手教你使用 Vuex，猴子都能看懂的教程</a></p><p><a href="https://toutiao.io/k/qugyzni" target="_blank" rel="noreferrer">10分钟搞懂事件驱动API</a></p><p><a href="https://toutiao.io/k/vvxwp6q" target="_blank" rel="noreferrer">任务型对话系统预训练最新研究进展</a></p><p><a href="https://toutiao.io/k/xw2lnva" target="_blank" rel="noreferrer">[推荐] 再见了 VMware，一款更轻量级的虚拟机！</a></p><p><a href="https://toutiao.io/k/mgym1lv" target="_blank" rel="noreferrer">[推荐] 浅谈缓存最终一致性的解决方案</a></p><p><a href="https://toutiao.io/k/0mfx2nd" target="_blank" rel="noreferrer">[推荐] JVM调优的几种场景（建议收藏）</a></p><p><a href="https://toutiao.io/k/5pjb28q" target="_blank" rel="noreferrer">[推荐] 非常哇塞的 ES读场景、写场景 性能优化指南！你值得拥有！</a></p><p><a href="https://toutiao.io/k/ldd1cse" target="_blank" rel="noreferrer">[推荐] 用规则引擎让你一天上线十个需求</a></p><p><a href="https://toutiao.io/k/zylzzpi" target="_blank" rel="noreferrer">[推荐] 网络编程怎么做才算是优雅？</a></p><p><a href="https://toutiao.io/k/kchudkd" target="_blank" rel="noreferrer">[推荐] 2022新年伊始，送你百篇干货文章</a></p><p><a href="https://toutiao.io/k/cah22k5" target="_blank" rel="noreferrer">[推荐] 偷天换日，用 JavaAgent 欺骗你的 JVM</a></p><p><a href="https://toutiao.io/k/ymscqc1" target="_blank" rel="noreferrer">[推荐] 缓存一致性最佳实践</a></p><p><a href="https://toutiao.io/k/hufqvji" target="_blank" rel="noreferrer">[推荐] 从零打造 Instagram</a></p><h2 id="code" tabindex="-1">code <a class="header-anchor" href="#code" aria-hidden="true">#</a></h2><p><a href="https://leetcode-cn.com/problems/calculate-money-in-leetcode-bank" target="_blank" rel="noreferrer">计算力扣银行的钱</a></p><h2 id="每日一题" tabindex="-1">每日一题 <a class="header-anchor" href="#每日一题" aria-hidden="true">#</a></h2><div class="language-go line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">go</span><pre class="shiki material-palenight"><code><span class="line"><span style="color:#A6ACCD;">                  Go 的 </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 可以边遍历边删除吗？</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                  </span></span>
<span class="line"><span style="color:#A6ACCD;">                    查看答案</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"><span style="color:#A6ACCD;">                  答案解析：</span></span>
<span class="line"><span style="color:#A6ACCD;">                  </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 并不是一个线程安全的数据结构。同时读写一个 </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 是未定义的行为，如果被检测到，会直接 panic。</span></span>
<span class="line"><span style="color:#A6ACCD;">上面说的是发生在多个协程同时读写同一个 </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;"> 的情况下。 如果在同一个协程内边遍历边删除，并不会检测到同时读写，理论上是可以这样做的。但是，遍历的结果就可能不会是相同的了，有可能结果遍历结果集中包含了删除的 key，也有可能不包含，这取决于删除 key 的时间：是在遍历到 key 所在的 bucket 时刻前或者后。</span></span>
<span class="line"><span style="color:#A6ACCD;">一般而言，这可以通过读写锁来解决：sync</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">RWMutex。</span></span>
<span class="line"><span style="color:#A6ACCD;">读之前调用 </span><span style="color:#82AAFF;">RLock</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> 函数，读完之后调用 </span><span style="color:#82AAFF;">RUnlock</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> 函数解锁；写之前调用 </span><span style="color:#82AAFF;">Lock</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> 函数，写完之后，调用 </span><span style="color:#82AAFF;">Unlock</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> 解锁。</span></span>
<span class="line"><span style="color:#A6ACCD;">另外，sync</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">Map 是线程安全的 </span><span style="color:#89DDFF;">map</span><span style="color:#A6ACCD;">，也可以使用。</span></span>
<span class="line"><span style="color:#A6ACCD;">参考答案来自：https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;font-style:italic;">//golang.design/go-questions/map/delete-on-range/</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">                </span></span>
<span class="line"></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>`,25),p=[l];function t(o,c,i,h,b,d){return e(),s("div",null,p)}const k=a(r,[["render",t]]);export{A as __pageData,k as default};
